<!DOCTYPE html>
<html lang="it">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Trade AI Analyst</title>
    <style>
        @page {
            size: a4;
            margin: 2cm;
            @top-center {
                content: '';
                height: 3cm;
                background-color: #991b1b;
            }
            @bottom-center {
                content: '';
                height: 1cm;
                background-color: #991b1b;
            }
        }
        
        @font-face {
            font-family: 'Roboto';
            src: url('{{ STATIC_URL }}fonts/Roboto-Light.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
            font-display: swap;
        }
        
        @font-face {
            font-family: 'Manrope';
            src: url('{{ STATIC_URL }}fonts/Manrope-Bold.ttf') format('truetype');
            font-weight: bold;
            font-style: normal;
            font-display: swap;
        }
        
        body {
            font-family: 'Roboto', Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            margin-top: 3.5cm;  /* Leave space for the header */
            margin-bottom: 1.5cm;  /* Leave space for the footer */
            column-count: 2;
            column-gap: 1cm;
        }
        
        .header-content {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 3cm;
            padding: 0.5cm;
            text-align: center;
            color: white;
            column-span: all;
        }
        
        .header-content h1 {
            margin: 0;
            font-family: 'Manrope', Helvetica, Arial, sans-serif;
            font-size: 24pt;
        }
        
        .header-content .subtitle {
            font-size: 10pt;
            margin-top: 0.5cm;
        }
        
        .footer-content {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 1cm;
            padding: 0.2cm;
            text-align: center;
            color: white;
            font-size: 8pt;
        }
        
        .page-number:after {
            content: counter(page);
        }
        
        .main-title {
            font-family: 'Manrope', Helvetica, Arial, sans-serif;
            font-size: 22pt;
            color: #991b1b;
            text-align: center;
            margin-bottom: 8pt;
            column-span: all;
        }
        
        .subtitle {
            font-size: 11pt;
            color: #666;
            text-align: center;
            margin-bottom: 20pt;
            column-span: all;
        }
        
        .article {
            break-inside: avoid;
            margin-bottom: 1cm;
        }
        
        .article-title {
            font-family: 'Manrope', Helvetica, Arial, sans-serif;
            font-size: 12pt;
            color: #991b1b;
            margin-top: 12pt;
            margin-bottom: 8pt;
        }
        
        .article-meta {
            font-size: 8pt;
            color: #666;
            margin-bottom: 8pt;
        }
        
        .article-content {
            font-size: 9pt;
            text-align: justify;
            margin-bottom: 10pt;
            line-height: 12pt;
        }
        
        .contact-footer {
            font-size: 9pt;
            color: #666;
            text-align: center;
            margin-top: 2cm;
            margin-bottom: 0.5cm;
            column-span: all;
        }
        
        hr.page-break {
            page-break-after: always;
            visibility: hidden;
            margin: 0;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header-content">
        <h1>Trade AI Analyst</h1>
        <div class="subtitle">Report Articoli  {{ now|date:"d/m/Y" }}</div>
    </div>
    
    <!-- Main Content -->
    <h1 class="main-title">Trade AI Analyst - {{ now|date:"F Y" }}</h1>
    
    <div class="subtitle">
        preparato il {{ now|date:"d/m/Y" }} | {{ articles|length }} articoli
    </div>
    
    <!-- Articles -->
    {% for article in articles %}
    <div class="article">
        <h3 class="article-title">{{ forloop.counter }}. {{ article.title_it }}</h3>
        
        <div class="article-meta">
            {% if article.source %}Fonte: {{ article.source }} | {% endif %}
            {% if article.url %}Originale: {{ article.url }}<br/> {% endif %}
            {% if article.article_date %} Data: <strong>{{ article.article_date|date:"d/m/Y" }}</strong> | {% endif %}
            {% if article.sector %}Settore: <strong>{{ article.sector }}</strong>{% endif %}
        </div>
        
        <div class="article-content">
            {% if article.content_it %}
                {{ article.content_it|safe }}
            {% endif %}
        </div>
    </div>
    {% endfor %}
    
    <!-- Contact Footer -->
    <div class="contact-footer">
        <p>
            <b>TA - Trade AI Analyst</b><br>
            Email: info@technicalanalyst.com | Tel: +39 123 456 7890<br>
            Web: www.technicalanalyst.com | Via Example 123, Milano, Italia<br>
            <i>Report generato automaticamente dal sistema TA</i>
        </p>
    </div>
    
    <!-- Footer -->
    <div class="footer-content">
        TA - Technical Analyst | Report generato il {{ now|date:"d/m/Y" }}
        <span style="float: right;" class="page-number">Pagina </span>
    </div>
</body>
</html>
