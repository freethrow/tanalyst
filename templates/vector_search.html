{% extends "base.html" %}
{% block content %}
  <div class="container mx-auto">
    <div class="flex items-center justify-between mb-4">
      <h1 class="text-2xl font-semibold">Vector Search</h1>
      {% if results %}
        <span class="text-sm text-base-content/70">{{ results|length }} results</span>
      {% endif %}
    </div>

    <form
      method="post"
      action="{% url 'articles:vector_search' %}"
      class="mb-4"
      hx-post="{% url 'articles:vector_search' %}"
      hx-target="#results"
      hx-swap="innerHTML"
      hx-indicator="#searching-indicator"
    >
      {% csrf_token %}
      <div class="join w-full">
        <input type="text" name="query" value="{{ query }}" placeholder="Enter your search query..." class="input input-bordered mr-4 w-full" />
        <button class="btn btn-secondary mx-4" type="submit">Search</button>
      </div>
    </form>

    <div id="searching-indicator" class="hidden htmx-indicator text-sm text-base-content/70 flex items-center gap-2 mb-4">
      <span class="loading loading-spinner loading-xs"></span>
      Searchingâ€¦
    </div>

    {% if error %}
      <div class="alert alert-error mb-4">{{ error }}</div>
    {% endif %}

    <div id="results">
      {% if results %}
        {% include "partials/vector_search_results.html" with results=results %}
      {% else %}
        <div class="alert">No results found.</div>
      {% endif %}
    </div>
  </div>
{% endblock %}